<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width initial-scale=1.0 user-scalable=no"/>
	<title>手机原生页面</title>
	<link rel="stylesheet" type="text/css" href="css/index.css">
</head>
<body>
	<div id="wrap">
		<header>
			<!-- 头部的上半部分 -->
			<div id="header_top">
				<h1 id="logo"><a href="javascript:;"><img src="img/logo.png" alt=""></a></h1>
				<!-- 图片整合技术，也叫精灵图或雪碧图 -->
				<a href="javascript:;" id="menu" class="menu_close"></a>
				<div id="nav">
					<a href="javascript:;" id="searchBtn">搜索</a>
					<a href="javascript:;">登录</a>
					<a href="javascript:;">注册</a>
				</div>
			</div>
			<!-- 头部的下半部分 -->
			<form action="javascript:;" id="search">
				<input type="text" placeholder="请输入搜索内容">
				<input type="submit" value="搜索">
			</form>
			<!-- 头部的频道部分 -->
			<div id="mask">
				<ul>
					<li><a href="javascript:;">首页</a></li>
					<li><a href="javascript:;">MV</a></li>
					<li><a href="javascript:;">悦单</a></li>
					<li><a href="javascript:;">V榜</a></li>
					<li><a href="javascript:;">音悦</a></li>
					<li><a href="javascript:;">商城</a></li>
					<li><a href="javascript:;">节目</a></li>
					<li><a href="javascript:;">饭团</a></li>
					<li><a href="javascript:;">资讯</a></li>
					<li><a href="javascript:;">我的家</a></li>
					<li><a href="javascript:;">APP下载</a></li>
					<li><a href="javascript:;">热门应用</a></li>
				</ul>
			</div>
		</header>
		<div id="content">
			<!-- 内容导航部分 -->
			<nav id="navs">
				<ul id="navslist">
					<li class="active"><a href="javascript:;">首页</a></li>
					<li><a href="javascript:;">MV</a></li>
					<li><a href="javascript:;">悦单</a></li>
					<li><a href="javascript:;">V榜</a></li>
					<li><a href="javascript:;">音悦</a></li>
					<li><a href="javascript:;">商城</a></li>
					<li><a href="javascript:;">节目</a></li>
					<li><a href="javascript:;">饭团</a></li>
					<li><a href="javascript:;">资讯</a></li>
					<li><a href="javascript:;">我的家</a></li>
					<li><a href="javascript:;">APP下载</a></li>
					<li><a href="javascript:;">热门应用</a></li>
				</ul>
			</nav>
			<!-- 内容轮播图部分 -->
			<div id="bannerWrap" class="clear_fix">
				<ul id="list" class="clear_fix">
					<li><a href="javascript:;"><img src="img/1.jpg" alt=""></a></li>
					<li><a href="javascript:;"><img src="img/2.jpg" alt=""></a></li>
					<li><a href="javascript:;"><img src="img/3.jpg" alt=""></a></li>
					<li><a href="javascript:;"><img src="img/4.jpg" alt=""></a></li>
					<li><a href="javascript:;"><img src="img/5.jpg" alt=""></a></li>
				</ul>
				<div id="nav">
					<span class="active"></span>
					<span></span>
					<span></span>
					<span></span>
					<span></span>
				</div>
			</div>
			<!-- 内容tab部分 -->
			<section class="tab">
				<header class="tab_header">
					<h2>MV首播</h2>
					<a href="javascript:;">更多&gt</a>
				</header>
				<nav class="tab_nav">
					<a href="javascript:;">全部</a>
					<a href="javascript:;">内地</a>
					<a href="javascript:;">港台</a>
					<a href="javascript:;">欧美</a>
					<a href="javascript:;">韩国</a>
					<a href="javascript:;">日本</a>
					<span></span>
				</nav>
				<div class="tab_wrap">
					<ul class="tab_loading"></ul>
					<ul class="tab_list">
						<li>
							<a href="javascript:;">
								<img src="img/a.jpg" alt="">
								<span>君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない</span>
							</a>
							<div class="ice">
								<div class="ice_left">
									<span class="ice_pic"></span>
									<span>9167</span>
								</div>
								<div class="ice_right">
									<span class="ice_pic"></span>
									<span>6</span>
								</div>
							</div>
						</li>
						<li>
							<a href="javascript:;">
								<img src="img/b.jpg" alt="">
								<span>君に贈る花がない</span>
							</a>
							<div class="ice">
								<div class="ice_left">
									<span class="ice_pic"></span>
									<span>9167</span>
								</div>
								<div class="ice_right">
									<span class="ice_pic"></span>
									<span>6</span>
								</div>
							</div>
						</li>
						<li>
							<a href="javascript:;">
								<img src="img/c.jpg" alt="">
								<span>君に贈る花がない</span>
							</a>
							<div class="ice">
								<div class="ice_left">
									<span class="ice_pic"></span>
									<span>9167</span>
								</div>
								<div class="ice_right">
									<span class="ice_pic"></span>
									<span>6</span>
								</div>
							</div>
						</li>
						<li>
							<a href="javascript:;">
								<img src="img/d.jpg" alt="">
								<span>君に贈る花がない</span>
							</a>
							<div class="ice">
								<div class="ice_left">
									<span class="ice_pic"></span>
									<span>9167</span>
								</div>
								<div class="ice_right">
									<span class="ice_pic"></span>
									<span>6</span>
								</div>
							</div>
						</li>
						<li>
							<a href="javascript:;">
								<img src="img/e.jpg" alt="">
								<span>君に贈る花がない</span>
							</a>
							<div class="ice">
								<div class="ice_left">
									<span class="ice_pic"></span>
									<span>9167</span>
								</div>
								<div class="ice_right">
									<span class="ice_pic"></span>
									<span>6</span>
								</div>
							</div>
						</li>
						<li>
							<a href="javascript:;">
								<img src="img/f.jpg" alt="">
								<span>君に贈る花がない</span>
							</a>
							<div class="ice">
								<div class="ice_left">
									<span class="ice_pic"></span>
									<span>9167</span>
								</div>
								<div class="ice_right">
									<span class="ice_pic"></span>
									<span>6</span>
								</div>
							</div>
						</li>
					</ul>
					<ul class="tab_loading"></ul>
				</div>
			</section>
			<section class="tab">
				<header class="tab_header">
					<h2>MV首播</h2>
					<a href="javascript:;">更多&gt</a>
				</header>
				<nav class="tab_nav">
					<a href="javascript:;">全部</a>
					<a href="javascript:;">内地</a>
					<a href="javascript:;">港台</a>
					<a href="javascript:;">欧美</a>
					<a href="javascript:;">韩国</a>
					<a href="javascript:;">日本</a>
					<span></span>
				</nav>
				<div class="tab_wrap">
					<ul class="tab_loading"></ul>
					<ul class="tab_list">
						<li>
							<a href="javascript:;">
								<img src="img/a.jpg" alt="">
								<span>君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない</span>
							</a>
							<div class="ice">
								<div class="ice_left">
									<span class="ice_pic"></span>
									<span>9167</span>
								</div>
								<div class="ice_right">
									<span class="ice_pic"></span>
									<span>6</span>
								</div>
							</div>
						</li>
						<li>
							<a href="javascript:;">
								<img src="img/b.jpg" alt="">
								<span>君に贈る花がない</span>
							</a>
							<div class="ice">
								<div class="ice_left">
									<span class="ice_pic"></span>
									<span>9167</span>
								</div>
								<div class="ice_right">
									<span class="ice_pic"></span>
									<span>6</span>
								</div>
							</div>
						</li>
						<li>
							<a href="javascript:;">
								<img src="img/c.jpg" alt="">
								<span>君に贈る花がない</span>
							</a>
							<div class="ice">
								<div class="ice_left">
									<span class="ice_pic"></span>
									<span>9167</span>
								</div>
								<div class="ice_right">
									<span class="ice_pic"></span>
									<span>6</span>
								</div>
							</div>
						</li>
						<li>
							<a href="javascript:;">
								<img src="img/d.jpg" alt="">
								<span>君に贈る花がない</span>
							</a>
							<div class="ice">
								<div class="ice_left">
									<span class="ice_pic"></span>
									<span>9167</span>
								</div>
								<div class="ice_right">
									<span class="ice_pic"></span>
									<span>6</span>
								</div>
							</div>
						</li>
						<li>
							<a href="javascript:;">
								<img src="img/e.jpg" alt="">
								<span>君に贈る花がない</span>
							</a>
							<div class="ice">
								<div class="ice_left">
									<span class="ice_pic"></span>
									<span>9167</span>
								</div>
								<div class="ice_right">
									<span class="ice_pic"></span>
									<span>6</span>
								</div>
							</div>
						</li>
						<li>
							<a href="javascript:;">
								<img src="img/f.jpg" alt="">
								<span>君に贈る花がない</span>
							</a>
							<div class="ice">
								<div class="ice_left">
									<span class="ice_pic"></span>
									<span>9167</span>
								</div>
								<div class="ice_right">
									<span class="ice_pic"></span>
									<span>6</span>
								</div>
							</div>
						</li>
					</ul>
					<ul class="tab_loading"></ul>
				</div>
			</section>
			<section class="tab">
				<header class="tab_header">
					<h2>MV首播</h2>
					<a href="javascript:;">更多&gt</a>
				</header>
				<nav class="tab_nav">
					<a href="javascript:;">全部</a>
					<a href="javascript:;">内地</a>
					<a href="javascript:;">港台</a>
					<a href="javascript:;">欧美</a>
					<a href="javascript:;">韩国</a>
					<a href="javascript:;">日本</a>
					<span></span>
				</nav>
				<div class="tab_wrap">
					<ul class="tab_loading"></ul>
					<ul class="tab_list" class="clear_fix">
						<li>
							<a href="javascript:;">
								<img src="img/a.jpg" alt="">
								<span>君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない</span>
							</a>
							<div class="ice">
								<div class="ice_left">
									<span class="ice_pic"></span>
									<span>9167</span>
								</div>
								<div class="ice_right">
									<span class="ice_pic"></span>
									<span>6</span>
								</div>
							</div>
						</li>
						<li>
							<a href="javascript:;">
								<img src="img/b.jpg" alt="">
								<span>君に贈る花がない</span>
							</a>
							<div class="ice">
								<div class="ice_left">
									<span class="ice_pic"></span>
									<span>9167</span>
								</div>
								<div class="ice_right">
									<span class="ice_pic"></span>
									<span>6</span>
								</div>
							</div>
						</li>
						<li>
							<a href="javascript:;">
								<img src="img/c.jpg" alt="">
								<span>君に贈る花がない</span>
							</a>
							<div class="ice">
								<div class="ice_left">
									<span class="ice_pic"></span>
									<span>9167</span>
								</div>
								<div class="ice_right">
									<span class="ice_pic"></span>
									<span>6</span>
								</div>
							</div>
						</li>
						<li>
							<a href="javascript:;">
								<img src="img/d.jpg" alt="">
								<span>君に贈る花がない</span>
							</a>
							<div class="ice">
								<div class="ice_left">
									<span class="ice_pic"></span>
									<span>9167</span>
								</div>
								<div class="ice_right">
									<span class="ice_pic"></span>
									<span>6</span>
								</div>
							</div>
						</li>
						<li>
							<a href="javascript:;">
								<img src="img/e.jpg" alt="">
								<span>君に贈る花がない</span>
							</a>
							<div class="ice">
								<div class="ice_left">
									<span class="ice_pic"></span>
									<span>9167</span>
								</div>
								<div class="ice_right">
									<span class="ice_pic"></span>
									<span>6</span>
								</div>
							</div>
						</li>
						<li>
							<a href="javascript:;">
								<img src="img/f.jpg" alt="">
								<span>君に贈る花がない</span>
							</a>
							<div class="ice">
								<div class="ice_left">
									<span class="ice_pic"></span>
									<span>9167</span>
								</div>
								<div class="ice_right">
									<span class="ice_pic"></span>
									<span>6</span>
								</div>
							</div>
						</li>
					</ul>
					<ul class="tab_loading"></ul>
				</div>
			</section>
			<section class="tab">
				<header class="tab_header">
					<h2>MV首播</h2>
					<a href="javascript:;">更多&gt</a>
				</header>
				<nav class="tab_nav">
					<a href="javascript:;">全部</a>
					<a href="javascript:;">内地</a>
					<a href="javascript:;">港台</a>
					<a href="javascript:;">欧美</a>
					<a href="javascript:;">韩国</a>
					<a href="javascript:;">日本</a>
					<span></span>
				</nav>
				<div class="tab_wrap">
					<ul class="tab_loading"></ul>
					<ul class="tab_list" class="clear_fix">
						<li>
							<a href="javascript:;">
								<img src="img/a.jpg" alt="">
								<span>君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない</span>
							</a>
							<div class="ice">
								<div class="ice_left">
									<span class="ice_pic"></span>
									<span>9167</span>
								</div>
								<div class="ice_right">
									<span class="ice_pic"></span>
									<span>6</span>
								</div>
							</div>
						</li>
						<li>
							<a href="javascript:;">
								<img src="img/b.jpg" alt="">
								<span>君に贈る花がない</span>
							</a>
							<div class="ice">
								<div class="ice_left">
									<span class="ice_pic"></span>
									<span>9167</span>
								</div>
								<div class="ice_right">
									<span class="ice_pic"></span>
									<span>6</span>
								</div>
							</div>
						</li>
						<li>
							<a href="javascript:;">
								<img src="img/c.jpg" alt="">
								<span>君に贈る花がない</span>
							</a>
							<div class="ice">
								<div class="ice_left">
									<span class="ice_pic"></span>
									<span>9167</span>
								</div>
								<div class="ice_right">
									<span class="ice_pic"></span>
									<span>6</span>
								</div>
							</div>
						</li>
						<li>
							<a href="javascript:;">
								<img src="img/d.jpg" alt="">
								<span>君に贈る花がない</span>
							</a>
							<div class="ice">
								<div class="ice_left">
									<span class="ice_pic"></span>
									<span>9167</span>
								</div>
								<div class="ice_right">
									<span class="ice_pic"></span>
									<span>6</span>
								</div>
							</div>
						</li>
						<li>
							<a href="javascript:;">
								<img src="img/e.jpg" alt="">
								<span>君に贈る花がない</span>
							</a>
							<div class="ice">
								<div class="ice_left">
									<span class="ice_pic"></span>
									<span>9167</span>
								</div>
								<div class="ice_right">
									<span class="ice_pic"></span>
									<span>6</span>
								</div>
							</div>
						</li>
						<li>
							<a href="javascript:;">
								<img src="img/f.jpg" alt="">
								<span>君に贈る花がない</span>
							</a>
							<div class="ice">
								<div class="ice_left">
									<span class="ice_pic"></span>
									<span>9167</span>
								</div>
								<div class="ice_right">
									<span class="ice_pic"></span>
									<span>6</span>
								</div>
							</div>
						</li>
					</ul>
					<ul class="tab_loading"></ul>
				</div>
			</section>
		</div>
		<div id="scroll_bar"></div>
	</div>
</body>
<script type="text/javascript" src="js/transform.js"></script>
<script type="text/javascript" src="js/scroll.js"></script>
<script type="text/javascript">
	// 取消浏览器默认行为
	document.addEventListener('touchstart',function (event){
	 	event.preventDefault()
	})

	//rem适配
	(function() {
		var width = document.documentElement.clientWidth / 16;
		var styleN = document.createElement('style');
		styleN.innerHTML = 'html{font-size:' + width + 'px!important}';
		document.head.appendChild(styleN);
	})()

	window.onload = function() {
		changeInput();
		changeMenu();
		drag();
		changeColor();
		banner();
		tab();
		webkitScroll(wrap, callback);
	}

	//获取焦点与失去焦点
	function changeInput() {
		var inputNode = document.querySelector("#search [type='text']");
		inputNode.addEventListener('touchstart', function(event) {
			inputNode.focus();
			event.stopPropagation();
		})
		document.addEventListener('touchstart', function() {
			inputNode.blur();
		})
	}

	//获取菜单频道
	function changeMenu() {
		var menu = document.getElementById('menu'); //注意menu不能加#
		var mask = document.getElementById('mask');
		menu.addEventListener('touchstart', function(event) {
			if (menu.className == 'menu_close') { //判断句中一定“==”
				menu.className = 'menu_open';
				mask.style.display = 'block';
			} else {
				menu.className = 'menu_close';
				mask.style.display = 'none';
			}
			event.stopPropagation();
		})
		document.addEventListener('touchstart', function() {
			menu.className = 'menu_close';
			mask.style.display = 'none';
		})
		mask.addEventListener('touchstart', function(event) {
			event.stopPropagation();
		})
	}

	//导航的拖拽
	function drag() {
		var navs = document.getElementById('navs');
		var navslist = document.getElementById('navslist');
		transformCss(navslist, 'translateZ', 0.01)
		var startX = 0;
		var eleX = 0;
		var beginTime = 0,
			beginValue = 0,
			endTime = 0,
			endValue = 0,
			disTime = 1,
			disValue = 0;
		navs.addEventListener('touchstart', function(event) {
			var touch = event.changedTouches[0];
			disValue = 0; //解决点二次开始点击残留speed的bug
			startX = touch.clientX;
			eleX = transformCss(navslist, 'translateX');
			beginTime = new Date().getTime();
			beginValue = eleX;
		})
		navs.addEventListener('touchmove', function(event) {
			var touch = event.changedTouches[0];
			var nowX = touch.clientX;
			var disX = nowX - startX;
			var translateX = eleX + disX;
			var minX = document.documentElement.clientWidth - navslist.offsetWidth;
			if (translateX > 0) {
				// translateX=0;
				var scale = 1 - translateX / document.documentElement.clientWidth;
				translateX = translateX * scale;
			} else if (translateX < minX) {
				// translateX=document.documentElement.clientWidth-navslist.offsetWidth;
				var overX = minX - translateX;
				var scale = 1 - overX / document.documentElement.clientWidth;
				translateX = minX - overX * scale
			}
			transformCss(navslist, 'translateX', translateX);
			endTime = new Date().getTime();
			endValue = translateX;
			disTime = endTime - beginTime;
			disValue = endValue - beginValue;
		})
		navs.addEventListener('touchend', function(event) {
			var touch = event.changedTouches[0];
			var speed = disValue / disTime;
			var target = transformCss(navslist, 'translateX') + speed * 100;
			var minX = document.documentElement.clientWidth - navslist.offsetWidth
			var bezier = '';
			// cubic-bezier(.29,1.57,.92,1.67)
			if (target > 0) {
				target = 0;
				// bezier='cubic-bezier(.29,1.57,.92,1.67)'
			} else if (target < minX) {
				target = minX;
				// bezier='cubic-bezier(.29,1.57,.92,1.67)'
			}
			navslist.style.transition = '1s' + bezier;
			transformCss(navslist, 'translateX', target)
		})
	}

	//导航触碰变色
	function changeColor() {
		var liArray = document.querySelectorAll('#navslist li');
		for (i = 0; i < liArray.length; i++) {
			liArray[i].addEventListener('touchmove', function() {
				if (!this.isMove) {
					this.isMove = true;
				}
			})
			liArray[i].addEventListener('touchend', function() {
				if (!this.isMove) {
					for (j = 0; j < liArray.length; j++) {
						liArray[j].className = '';
					}
					this.className = 'active';
				}
				this.isMove = false;
			})
		}
	}

	//banner轮播图
	function banner() {
		//动画滑动效果
		var wrap = document.getElementById('bannerWrap');
		var list = document.getElementById('list');
		transformCss(list, 'translateZ', 0.01)
		list.innerHTML += list.innerHTML;
		var spanNodes = document.querySelectorAll('#nav span')
		var eleX = 0,
			startX = 0,
			nowX = 0,
			disX = 0;
		var timer = 0;
		var nowIndex = 0;
		//li标签内动态数目轮播图
		var liArr = document.querySelectorAll('#bannerWrap #list li')
		var styleN = document.createElement('style');
		var cssText = '#list{width:' + liArr.length * 100 + '%}';
		cssText += '#list li{width:' + (1 / liArr.length * 100) + '%}';
		cssText += '#bannerWrap{height:' + liArr[0].offsetHeight + 'px}';
		styleN.innerHTML = cssText;
		document.head.appendChild(styleN)
		// var translateX=0;
		//轮播图手动滑动效果
		wrap.addEventListener('touchstart', function(event) {
			clearInterval(timer)
			list.style.transition = 'none';
			var touch = event.changedTouches[0];
			startX = touch.clientX;
			// eleX=list.offsetLeft;
			// eleX=translateX;
			eleX = transformCss(list, 'translateX');
		})
		wrap.addEventListener('touchmove', function(event) {
			var touch = event.changedTouches[0];
			nowX = touch.clientX;
			disX = nowX - startX;
			// translateX=eleX+disX;
			// list.style.transform='translateX('+translateX+'px)';
			transformCss(list, 'translateX', eleX + disX)
		})
		//切换整张图片
		wrap.addEventListener('touchend', function(event) {
			list.style.transition = 'none';
			var touch = event.changedTouches[0];
			// event.preventDefault();
			// var nowIndex=0;
			// var left=list.offsetLeft;
			// var left=translateX;
			var left = transformCss(list, 'translateX')
			// if(disX<0){
			// 	//左滑向上取整
			// 	nowIndex=Math.ceil(-left/document.documentElement.clientWidth)
			// }else{
			// 	//右滑向下取整
			// 	nowIndex=Math.floor(left/document.documentElement.clientWidth)
			// }
			nowIndex = Math.round(-left / document.documentElement.clientWidth);
			//避免轮播图两边留白显示
			// if(nowIndex<0){
			// 	nowIndex=0;
			// }else if(nowIndex>liArr.length-1){
			// 	nowIndex=liArr.length-1;
			// }
			if (nowIndex <= 0) {
				nowIndex = spanNodes.length;
			} else if (nowIndex == liArr.length - 1) {
				nowIndex = spanNodes.length - 1;
			}
			transformCss(list, 'translateX', -nowIndex * document.documentElement.clientWidth)
			setTimeout(function() {
				list.style.transition = '0.5s';
				// translateX=-nowIndex*document.documentElement.clientWidth
				// list.style.transform='translateX('+translateX+'px)';
				transformCss(list, 'translateX', -nowIndex * document.documentElement.clientWidth)
				//动态给圆点加入红色背景
				for (i = 0; i < spanNodes.length; i++) {
					spanNodes[i].className = '';
				}
				spanNodes[nowIndex % spanNodes.length].className = 'active';
			}, 20)
			auto()
		})
		// var nowIndex=0;
		auto()

		function auto() {
			timer = setInterval(function() {
				list.style.transition = 'none';
				if (nowIndex == liArr.length - 1) {
					nowIndex = spanNodes.length - 1
				}
				transformCss(list, 'translateX', -nowIndex * document.documentElement.clientWidth);
				setTimeout(function() {
					nowIndex++;
					list.style.transition = '0.5s';
					transformCss(list, 'translateX', -nowIndex * document.documentElement.clientWidth);
					for (i = 0; i < spanNodes.length; i++) {
						spanNodes[i].className = '';
					}
					spanNodes[nowIndex % spanNodes.length].className = 'active';
				}, 20)

			}, 1500)
		}
	}

	//tab轮播
	function tab() {
		var tab_wrap = document.querySelectorAll('.tab_wrap');
		var tab_nav = document.querySelectorAll('.tab_nav');
		for (i = 0; i < tab_wrap.length; i++) {
			move(tab_wrap[i], tab_nav[i])
		}

		function move(tab_wrap, tab_nav) {
			transformCss(tab_wrap, 'translateX', -tab_nav.offsetWidth);
			transformCss(tab_wrap, 'translateZ', 0.01)
			var eleX = 0,
				startX = 0,
				nowX, disX;
			var isLoad = false;
			var tab_loading = tab_wrap.querySelectorAll('.tab_loading')
			var now = 0;
			var spanNode = tab_nav.querySelector('.tab .tab_nav span');
			var aNodes = tab_nav.querySelectorAll('.tab .tab_nav a');
			var startY, nowY, disY, isX = true,
				isFirst = true;
			tab_wrap.addEventListener('touchstart', function(event) {
				// isX=true;
				// isFirst=true;
				if (isLoad) {
					return;
				}
				tab_wrap.style.transition = 'none';
				var touch = event.changedTouches[0];
				eleX = transformCss(tab_wrap, 'translateX');
				startX = touch.clientX;
				startY = touch.clientY;
			})
			tab_wrap.addEventListener('touchmove', function(event) {
				// if(!isX){
				// 	return;
				// }
				if (isLoad) {
					return;
				}
				var touch = event.changedTouches[0];
				nowX = touch.clientX;
				disX = nowX - startX;
				nowY = touch.clientY;
				disY = nowY - startY;
				// if(isFirst){
				// 	if(Math.abs(disY)>Math.abs(disX)){
				// 		isX=false;
				// 	}
				// 	isFirst=false;	
				// }
				//解决竖向滑屏横向抖动bug,取消部分为另一种兼容方法
				if (Math.abs(disY) > Math.abs(disX)) {
					return;
				}
				transformCss(tab_wrap, 'translateX', eleX + disX);
				if (Math.abs(disX) > tab_nav.offsetWidth / 2) {
					var target = disX > 0 ? 0 : -2 * tab_nav.offsetWidth
					tab_wrap.style.transition = '0.5s';
					transformCss(tab_wrap, 'translateX', target)
					isLoad = true;
					if (disX < 0) {
						now = now + 1;
					} else if (disX > 0) {
						now = now - 1;
					}
					if (now < 0) {
						now = 5;
					} else if (now > 5) {
						now = 0;
					}
					spanNode.style.transition = '.5s';
					transformCss(spanNode, 'translateX', aNodes[now].offsetLeft)
					transformCss(spanNode, 'translateZ', 0.01)
					tab_wrap.addEventListener('transitionEnd', transitionEnd);
					tab_wrap.addEventListener('webkitTransitionEnd', transitionEnd);

					function transitionEnd() {
						tab_wrap.removeEventListener('transitionEnd', transitionEnd);
						tab_wrap.removeEventListener('webkitTransitionEnd', transitionEnd);
						for (i = 0; i < tab_loading.length; i++) {
							tab_loading[i].style.opacity = 1;
						}
						setTimeout(function() {
							tab_wrap.style.transition = 'none'
							transformCss(tab_wrap, 'translateX', -tab_nav.offsetWidth)
							isLoad = false;
							for (i = 0; i < tab_loading.length; i++) {
								tab_loading[i].style.opacity = 0;
							}
						}, 3000)
					}
				}
			})
			tab_wrap.addEventListener('touchend', function(event) {
				if (isLoad) {
					return;
				}
				var touch = event.changedTouches[0];
				nowX = touch.clientX;
				disX = nowX - startX;
				if (Math.abs(disX) < tab_nav.offsetWidth / 2) {
					tab_wrap.style.transition = '0.5s';
					transformCss(tab_wrap, 'translateX', -tab_nav.offsetWidth)
				}
			})
		}
	}

	//内容区拖拽及滚动条显示scroll(wrap,callback)
	var wrap = document.getElementById('wrap');
	var content = document.getElementById('content')
	//创建滚动条出现消失函数
	var scroll = document.getElementById('scroll_bar')
	var scale = document.documentElement.clientHeight / content.clientHeight;
	scroll.style.height = scale * document.documentElement.clientHeight + 'px';
	var callback = {
		start: function() {
			scroll.style.opacity = '1';
		},
		move: function() {
			//内容移动的距离
			var distance = transformCss(content, 'translateY')
			//滚动条移动距离
			transformCss(scroll, 'translateY', -scale * distance)
			scroll.style.opacity = '1';
		},
		end: function() {
			scroll.style.opacity = 0;
		}
	}
</script>
</html>
